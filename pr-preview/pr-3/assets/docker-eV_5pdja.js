import{f as n,j as e}from"./index-xNsX7Ar1.js";const a={description:"Guide to running Reth using Docker, including obtaining images from GitHub or building locally, using Docker Compose.",title:"Docker"};function r(i){const s={a:"a",aside:"aside",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...n(),...i.components};return e.jsxs(e.Fragment,{children:[e.jsx(s.header,{children:e.jsxs(s.h1,{id:"docker",children:["Docker",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#docker",children:e.jsx(s.div,{"data-autolink-icon":!0})})]})}),`
`,e.jsx(s.p,{children:"There are two ways to obtain a Reth Docker image:"}),`
`,e.jsxs(s.ol,{children:[`
`,e.jsx(s.li,{children:e.jsx(s.a,{href:"#github",children:"GitHub"})}),`
`,e.jsx(s.li,{children:e.jsx(s.a,{href:"#building-the-docker-image",children:"Building it from source"})}),`
`]}),`
`,e.jsxs(s.p,{children:["Once you have obtained the Docker image, proceed to ",e.jsx(s.a,{href:"#using-the-docker-image",children:`Using the Docker
image`}),"."]}),`
`,e.jsx(s.aside,{"data-callout":"note",children:e.jsxs(s.p,{children:["Reth requires Docker Engine version 20.10.10 or higher due to ",e.jsx(s.a,{href:"https://docs.docker.com/engine/release-notes/20.10/#201010",children:"missing support"})," for the ",e.jsx(s.code,{children:"clone3"})," syscall in previous versions."]})}),`
`,e.jsxs(s.h2,{id:"github",children:["GitHub",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#github",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"Reth docker images for both x86_64 and ARM64 machines are published with every release of reth on GitHub Container Registry."}),`
`,e.jsx(s.p,{children:"You can obtain the latest image with:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" pull"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" ghcr.io/paradigmxyz/reth"})]})})})}),`
`,e.jsx(s.p,{children:"Or a specific version (e.g. v0.0.1) with:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" pull"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" ghcr.io/paradigmxyz/reth:v0.0.1"})]})})})}),`
`,e.jsx(s.p,{children:"You can test the image with:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" run"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --rm"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" ghcr.io/paradigmxyz/reth"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --version"})]})})})}),`
`,e.jsxs(s.p,{children:["If you can see the latest ",e.jsx(s.a,{href:"https://github.com/paradigmxyz/reth/releases",children:"Reth release"})," version, then you've successfully installed Reth via Docker."]}),`
`,e.jsxs(s.h2,{id:"building-the-docker-image",children:["Building the Docker image",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#building-the-docker-image",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"To build the image from source, navigate to the root of the repository and run:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" ."}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -t"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" reth:local"})]})})})}),`
`,e.jsx(s.p,{children:"The build will likely take several minutes. Once it's built, test it with:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" run"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" reth:local"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --version"})]})})})}),`
`,e.jsxs(s.h2,{id:"using-the-docker-image",children:["Using the Docker image",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#using-the-docker-image",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"There are two ways to use the Docker image:"}),`
`,e.jsxs(s.ol,{children:[`
`,e.jsx(s.li,{children:e.jsx(s.a,{href:"#using-plain-docker",children:"Using Docker"})}),`
`,e.jsx(s.li,{children:e.jsx(s.a,{href:"#using-docker-compose",children:"Using Docker Compose"})}),`
`]}),`
`,e.jsxs(s.h3,{id:"using-plain-docker",children:["Using Plain Docker",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#using-plain-docker",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"To run Reth with Docker, run:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" run"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    -v"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" rethdata:/root/.local/share/reth/mainnet"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    -d"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    -p"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" 9001:9001"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    -p"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" 30303:30303"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    -p"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" 30303:30303/udp"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    --name"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" reth"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"    reth:local"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"    node"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    --metrics"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" 0.0.0.0:9001"})]})]})})}),`
`,e.jsxs(s.p,{children:["The above command will create a container named ",e.jsx(s.code,{children:"reth"})," and a named volume called ",e.jsx(s.code,{children:"rethdata"}),` for data persistence.
It will also expose the `,e.jsx(s.code,{children:"30303"})," port (TCP and UDP) for peering with other nodes and the ",e.jsx(s.code,{children:"9001"})," port for metrics."]}),`
`,e.jsxs(s.p,{children:["It will use the local image ",e.jsx(s.code,{children:"reth:local"}),". If you want to use the GitHub Container Registry remote image, use ",e.jsx(s.code,{children:"ghcr.io/paradigmxyz/reth"})," with your preferred tag."]}),`
`,e.jsxs(s.h3,{id:"using-docker-compose",children:["Using Docker Compose",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#using-docker-compose",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"To run Reth with Docker Compose, run the following command from a shell inside the root directory of this repository:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"./etc/generate-jwt.sh"})}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" compose"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -f"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" etc/docker-compose.yml"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -f"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" etc/lighthouse.yml"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" up"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -d"})]})]})})}),`
`,e.jsxs(s.aside,{"data-callout":"note",children:[e.jsx(s.p,{children:"If you want to run Reth with a CL that is not Lighthouse:"}),e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:["The JWT for the consensus client can be found at ",e.jsx(s.code,{children:"etc/jwttoken/jwt.hex"})," in this repository, after the ",e.jsx(s.code,{children:"etc/generate-jwt.sh"})," script is run"]}),`
`,e.jsxs(s.li,{children:["The Reth Engine API is accessible on ",e.jsx(s.code,{children:"localhost:8551"})]}),`
`]})]}),`
`,e.jsx(s.p,{children:"To check if Reth is running correctly, run:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" compose"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -f"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" etc/docker-compose.yml"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -f"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" etc/lighthouse.yml"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" logs"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -f"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" reth"})]})})})}),`
`,e.jsxs(s.p,{children:["The default ",e.jsx(s.code,{children:"docker-compose.yml"})," file will create three containers:"]}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsx(s.li,{children:"Reth"}),`
`,e.jsx(s.li,{children:"Prometheus"}),`
`,e.jsx(s.li,{children:"Grafana"}),`
`]}),`
`,e.jsxs(s.p,{children:["The optional ",e.jsx(s.code,{children:"lighthouse.yml"})," file will create two containers:"]}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsx(s.li,{children:"Lighthouse"}),`
`,e.jsx(s.li,{children:e.jsx(s.a,{href:"https://github.com/ethpandaops/ethereum-metrics-exporter",children:e.jsx(s.code,{children:"ethereum-metrics-exporter"})})}),`
`]}),`
`,e.jsxs(s.p,{children:["Grafana will be exposed on ",e.jsx(s.code,{children:"localhost:3000"})," and accessible via default credentials (username and password is ",e.jsx(s.code,{children:"admin"}),"), with two available dashboards:"]}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsx(s.li,{children:"reth"}),`
`,e.jsx(s.li,{children:"Ethereum Metrics Exporter (works only if Lighthouse is also running)"}),`
`]}),`
`,e.jsxs(s.h2,{id:"interacting-with-reth-inside-docker",children:["Interacting with Reth inside Docker",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#interacting-with-reth-inside-docker",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"To interact with Reth you must first open a shell inside the Reth container by running:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" exec"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -it"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" reth"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" bash"})]})})})}),`
`,e.jsxs(s.strong,{children:["If Reth is running with Docker Compose, replace ",e.jsx(s.code,{children:"reth"})," with ",e.jsx(s.code,{children:"reth-reth-1"})," in the above command"]}),`
`,e.jsxs(s.p,{children:["Refer to the ",e.jsx(s.a,{href:"#TODO",children:"CLI docs"})," to interact with Reth once inside the Reth container."]}),`
`,e.jsxs(s.h2,{id:"run-only-grafana-in-docker",children:["Run only Grafana in Docker",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#run-only-grafana-in-docker",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"This allows importing existing Grafana dashboards, without running Reth in Docker."}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"docker"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" compose"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -f"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" etc/docker-compose.yml"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" up"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -d"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --no-deps"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" grafana"})]})})})}),`
`,e.jsxs(s.p,{children:["After login with ",e.jsx(s.code,{children:"admin:admin"})," credentials, Prometheus should be listed under ",e.jsx(s.a,{href:"http://localhost:3000/connections/datasources",children:e.jsx(s.code,{children:"Grafana datasources"})}),". Replace its ",e.jsx(s.code,{children:"Prometheus server URL"})," so it points to locally running one. On Mac or Windows, use ",e.jsx(s.code,{children:"http://host.docker.internal:9090"}),". On Linux, try ",e.jsx(s.code,{children:"http://172.17.0.1:9090"}),"."]})]})}function d(i={}){const{wrapper:s}={...n(),...i.components};return s?e.jsx(s,{...i,children:e.jsx(r,{...i})}):r(i)}export{d as default,a as frontmatter};
