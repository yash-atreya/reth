import{f as a,j as e}from"./index-xNsX7Ar1.js";const l={description:"Running Reth in a private testnet using Kurtosis.",title:"Run Reth in a private testnet using Kurtosis"};function i(n){const s={a:"a",blockquote:"blockquote",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...a(),...n.components};return e.jsxs(e.Fragment,{children:[e.jsx(s.header,{children:e.jsxs(s.h1,{id:"run-reth-in-a-private-testnet-using-kurtosis",children:["Run Reth in a private testnet using Kurtosis",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#run-reth-in-a-private-testnet-using-kurtosis",children:e.jsx(s.div,{"data-autolink-icon":!0})})]})}),`
`,e.jsx(s.p,{children:"For those who need a private testnet to validate functionality or scale with Reth."}),`
`,e.jsxs(s.h2,{id:"using-docker-locally",children:["Using Docker locally",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#using-docker-locally",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["This guide uses ",e.jsx(s.a,{href:"https://github.com/ethpandaops/ethereum-package",children:"Kurtosis' ethereum-package"})," and assumes you have Kurtosis and Docker installed and have Docker already running on your machine."]}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:["Go ",e.jsx(s.a,{href:"https://docs.kurtosis.com/install/",children:"here"})," to install Kurtosis"]}),`
`,e.jsxs(s.li,{children:["Go ",e.jsx(s.a,{href:"https://docs.docker.com/get-docker/",children:"here"})," to install Docker"]}),`
`]}),`
`,e.jsxs(s.p,{children:["The ",e.jsx(s.a,{href:"https://github.com/ethpandaops/ethereum-package",children:e.jsx(s.code,{children:"ethereum-package"})})," is a ",e.jsx(s.a,{href:"https://docs.kurtosis.com/advanced-concepts/packages",children:"package"})," for a general purpose Ethereum testnet definition used for instantiating private testnets at any scale over Docker or Kubernetes, locally or in the cloud. This guide will go through how to spin up a local private testnet with Reth and various CL clients locally. Specifically, you will instantiate a 2-node network over Docker with Reth/Lighthouse and Reth/Teku client combinations."]}),`
`,e.jsxs(s.p,{children:["To see all possible configurations and flags you can use, including metrics and observability tools (e.g. Grafana, Prometheus, etc), go ",e.jsx(s.a,{href:"https://github.com/ethpandaops/ethereum-package#configuration",children:"here"}),"."]}),`
`,e.jsxs(s.p,{children:["Genesis data will be generated using this ",e.jsx(s.a,{href:"https://github.com/ethpandaops/ethereum-genesis-generator",children:"genesis-generator"})," to be used to bootstrap the EL and CL clients for each node. The end result will be a private testnet with nodes deployed as Docker containers in an ephemeral, isolated environment on your machine called an ",e.jsx(s.a,{href:"https://docs.kurtosis.com/advanced-concepts/enclaves/",children:"enclave"}),". Read more about how the ",e.jsx(s.code,{children:"ethereum-package"})," works by going ",e.jsx(s.a,{href:"https://github.com/ethpandaops/ethereum-package/",children:"here"}),"."]}),`
`,e.jsxs(s.h3,{id:"step-1-define-the-parameters-and-shape-of-your-private-network",children:["Step 1: Define the parameters and shape of your private network",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#step-1-define-the-parameters-and-shape-of-your-private-network",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["First, in your home directory, create a file with the name ",e.jsx(s.code,{children:"network_params.yaml"})," with the following contents:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"participants"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:":"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    - "}),e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"el_type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"reth"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      el_image"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"ghcr.io/paradigmxyz/reth"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      cl_type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"lighthouse"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      cl_image"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"sigp/lighthouse:latest"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    - "}),e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"el_type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"reth"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      el_image"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"ghcr.io/paradigmxyz/reth"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      cl_type"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"teku"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#22863A","--shiki-dark":"#8DDB8C"},children:"      cl_image"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"consensys/teku:latest"})]})]})})}),`
`,e.jsxs(s.blockquote,{children:[`
`,e.jsxs(s.p,{children:[`[!TIP]
If you would like to use a modified reth node, you can build an image locally with a custom tag. The tag can then be used in the `,e.jsx(s.code,{children:"el_image"})," field in the ",e.jsx(s.code,{children:"network_params.yaml"})," file."]}),`
`]}),`
`,e.jsxs(s.h3,{id:"step-2-spin-up-your-network",children:["Step 2: Spin up your network",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#step-2-spin-up-your-network",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"Next, run the following command from your command line:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"kurtosis"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" run"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" github.com/ethpandaops/ethereum-package"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --args-file"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" ~/network_params.yaml"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --image-download"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" always"})]})})})}),`
`,e.jsxs(s.p,{children:["Kurtosis will spin up an ",e.jsx(s.a,{href:"https://docs.kurtosis.com/advanced-concepts/enclaves/",children:"enclave"})," (i.e an ephemeral, isolated environment) and begin to configure and instantiate the nodes in your network. In the end, Kurtosis will print the services running in your enclave that form your private testnet alongside all the container ports and files that were generated & used to start up the private testnet. Here is a sample output:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"INFO[2024-07-09T12:01:35+02:00] ========================================================"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"INFO[2024-07-09T12:01:35+02:00] ||          Created enclave: silent-mountain          ||"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"INFO[2024-07-09T12:01:35+02:00] ========================================================"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"Name:            silent-mountain"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"UUID:            cb5d0a7d0e7c"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"Status:          RUNNING"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"Creation Time:   Tue, 09 Jul 2024 12:00:03 CEST"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"Flags:"})}),`
`,e.jsx(s.span,{className:"line","data-empty-line":!0,children:" "}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"========================================= Files Artifacts ========================================="})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"UUID           Name"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"414a075a37aa   1-lighthouse-reth-0-63-0"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"34d0b9ff906b   2-teku-reth-64-127-0"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"dffa1bcd1da1   el_cl_genesis_data"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"fdb202429b26   final-genesis-timestamp"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"da0d9d24b340   genesis-el-cl-env-file"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"55c46a6555ad   genesis_validators_root"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"ba79dbd109dd   jwt_file"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"04948fd8b1e3   keymanager_file"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"538211b6b7d7   prysm-password"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"ed75fe7d5293   validator-ranges"})}),`
`,e.jsx(s.span,{className:"line","data-empty-line":!0,children:" "}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"========================================== User Services =========================================="})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"UUID           Name                                             Ports                                         Status"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0853f809c300   cl-1-lighthouse-reth                             http: 4000/tcp -> http://127.0.0.1:32811      RUNNING"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                metrics: 5054/tcp -> http://127.0.0.1:32812"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                tcp-discovery: 9000/tcp -> 127.0.0.1:32813"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                udp-discovery: 9000/udp -> 127.0.0.1:32776"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"f81cd467efe3   cl-2-teku-reth                                   http: 4000/tcp -> http://127.0.0.1:32814      RUNNING"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                metrics: 8008/tcp -> http://127.0.0.1:32815"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                tcp-discovery: 9000/tcp -> 127.0.0.1:32816"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                udp-discovery: 9000/udp -> 127.0.0.1:32777"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"f21d5ca3061f   el-1-reth-lighthouse                             engine-rpc: 8551/tcp -> 127.0.0.1:32803       RUNNING"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                metrics: 9001/tcp -> http://127.0.0.1:32804"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                rpc: 8545/tcp -> 127.0.0.1:32801"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                tcp-discovery: 30303/tcp -> 127.0.0.1:32805"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                udp-discovery: 30303/udp -> 127.0.0.1:32774"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                ws: 8546/tcp -> 127.0.0.1:32802"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"e234b3b4a440   el-2-reth-teku                                   engine-rpc: 8551/tcp -> 127.0.0.1:32808       RUNNING"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                metrics: 9001/tcp -> http://127.0.0.1:32809"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                rpc: 8545/tcp -> 127.0.0.1:32806"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                tcp-discovery: 30303/tcp -> 127.0.0.1:32810"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                udp-discovery: 30303/udp -> 127.0.0.1:32775"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"                                                                ws: 8546/tcp -> 127.0.0.1:32807"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"92dd5a0599dc   validator-key-generation-cl-validator-keystore   <none>                                        RUNNING"})}),`
`,e.jsx(s.span,{className:"line",children:e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"f0a7d5343346   vc-1-reth-lighthouse                             metrics: 8080/tcp -> http://127.0.0.1:32817   RUNNING"})})]})})}),`
`,e.jsxs(s.p,{children:["Great! You now have a private network with 2 full Ethereum nodes on your local machine over Docker - one that is a Reth/Lighthouse pair and another that is Reth/Teku. Check out the ",e.jsx(s.a,{href:"https://docs.kurtosis.com/cli",children:"Kurtosis docs"})," to learn about the various ways you can interact with and inspect your network."]}),`
`,e.jsxs(s.h2,{id:"using-kurtosis-on-kubernetes",children:["Using Kurtosis on Kubernetes",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#using-kurtosis-on-kubernetes",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["Kurtosis packages are portable and reproducible, meaning they will work the same way over Docker or Kubernetes, locally or on remote infrastructure. For use cases that require a larger scale, Kurtosis can be deployed on Kubernetes by following these docs ",e.jsx(s.a,{href:"https://docs.kurtosis.com/k8s/",children:"here"}),"."]}),`
`,e.jsxs(s.h2,{id:"running-the-network-with-additional-services",children:["Running the network with additional services",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#running-the-network-with-additional-services",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["The ",e.jsx(s.a,{href:"https://github.com/ethpandaops/ethereum-package",children:e.jsx(s.code,{children:"ethereum-package"})})," comes with many optional flags and arguments you can enable for your private network. Some include:"]}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsx(s.li,{children:"A Grafana + Prometheus instance"}),`
`,e.jsxs(s.li,{children:["A transaction spammer called ",e.jsx(s.a,{href:"https://github.com/MariusVanDerWijden/tx-fuzz",children:e.jsx(s.code,{children:"tx-fuzz"})})]}),`
`,e.jsx(s.li,{children:e.jsx(s.a,{href:"https://github.com/dapplion/beacon-metrics-gazer",children:"A network metrics collector"})}),`
`,e.jsxs(s.li,{children:["Flashbot's ",e.jsx(s.code,{children:"mev-boost"})," implementation of PBS (to test/simulate MEV workflows)"]}),`
`]}),`
`,e.jsxs(s.h3,{id:"questions",children:["Questions?",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#questions",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["Please reach out to the ",e.jsx(s.a,{href:"https://discord.com/invite/6Jjp9c89z9",children:"Kurtosis discord"})," should you have any questions about how to use the ",e.jsx(s.code,{children:"ethereum-package"})," for your private testnet needs. Thanks!"]})]})}function t(n={}){const{wrapper:s}={...a(),...n.components};return s?e.jsx(s,{...n,children:e.jsx(i,{...n})}):i(n)}export{t as default,l as frontmatter};
