import{f as t,j as e}from"./index-xNsX7Ar1.js";const a={description:"How to run Reth on Ethereum mainnet and testnets.",title:"Running Reth on Ethereum Mainnet or testnets"};function i(s){const n={a:"a",blockquote:"blockquote",code:"code",div:"div",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",span:"span",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...t(),...s.components};return e.jsxs(e.Fragment,{children:[e.jsx(n.header,{children:e.jsxs(n.h1,{id:"running-reth-on-ethereum-mainnet-or-testnets",children:["Running Reth on Ethereum Mainnet or testnets",e.jsx(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#running-reth-on-ethereum-mainnet-or-testnets",children:e.jsx(n.div,{"data-autolink-icon":!0})})]})}),`
`,e.jsxs(n.p,{children:["Reth is an ",e.jsx(n.a,{href:"https://ethereum.org/en/developers/docs/nodes-and-clients/#execution-clients",children:e.jsx(n.em,{children:"execution client"})}),". After Ethereum's transition to Proof of Stake (aka the Merge) it became required to run a ",e.jsx(n.a,{href:"https://ethereum.org/en/developers/docs/nodes-and-clients/#consensus-clients",children:e.jsx(n.em,{children:"consensus client"})}),' along your execution client in order to sync into any "post-Merge" network. This is because the Ethereum execution layer now outsources consensus to a separate component, known as the consensus client.']}),`
`,e.jsx(n.p,{children:"Consensus clients decide what blocks are part of the chain, while execution clients only validate that transactions and blocks are valid in themselves and with respect to the world state. In other words, execution clients execute blocks and transactions and check their validity, while consensus clients determine which valid blocks should be part of the chain. Therefore, running a consensus client in parallel with the execution client is necessary to ensure synchronization and participation in the network."}),`
`,e.jsx(n.p,{children:"By running both an execution client like Reth and a consensus client, such as Lighthouse ðŸ¦€ (which we will assume for this guide), you can effectively contribute to the Ethereum network and participate in the consensus process, even if you don't intend to run validators."}),`
`,e.jsxs(n.table,{children:[e.jsx(n.thead,{children:e.jsxs(n.tr,{children:[e.jsx(n.th,{children:"Client"}),e.jsx(n.th,{children:"Role"})]})}),e.jsxs(n.tbody,{children:[e.jsxs(n.tr,{children:[e.jsx(n.td,{children:"Execution"}),e.jsx(n.td,{children:"Validates transactions and blocks"})]}),e.jsxs(n.tr,{children:[e.jsx(n.td,{}),e.jsx(n.td,{children:"(checks their validity and global state)"})]}),e.jsxs(n.tr,{children:[e.jsx(n.td,{children:"Consensus"}),e.jsx(n.td,{children:"Determines which blocks are part of the chain"})]}),e.jsxs(n.tr,{children:[e.jsx(n.td,{}),e.jsx(n.td,{children:"(makes consensus decisions)"})]})]})]}),`
`,e.jsxs(n.h2,{id:"running-the-reth-node",children:["Running the Reth Node",e.jsx(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#running-the-reth-node",children:e.jsx(n.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(n.p,{children:["First, ensure that you have Reth installed by following the ",e.jsx(n.a,{href:"./../installation/installation",children:"installation instructions"}),"."]}),`
`,e.jsx(n.p,{children:"Now, to start the archive node, run:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(n.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(n.code,{children:e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"reth"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" node"})]})})})}),`
`,e.jsx(n.p,{children:"And to start the full node, run:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(n.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(n.code,{children:e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"reth"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" node"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --full"})]})})})}),`
`,e.jsxs(n.p,{children:["On differences between archive and full nodes, see ",e.jsx(n.a,{href:"/pruning#basic-concepts",children:"Pruning & Full Node"})," section."]}),`
`,e.jsxs(n.blockquote,{children:[`
`,e.jsxs(n.p,{children:["Note that these commands will not open any HTTP/WS ports by default. You can change this by adding the ",e.jsx(n.code,{children:"--http"}),", ",e.jsx(n.code,{children:"--ws"})," flags, respectively and using the ",e.jsx(n.code,{children:"--http.api"})," and ",e.jsx(n.code,{children:"--ws.api"})," flags to enable various ",e.jsx(n.a,{href:"/home/runner/work/reth/reth/book/vocs/docs/pages/jsonrpc/intro",children:"JSON-RPC APIs"}),". For more commands, see the ",e.jsxs(n.a,{href:"#TODO",children:[e.jsx(n.code,{children:"reth node"})," CLI reference"]}),"."]}),`
`]}),`
`,e.jsxs(n.p,{children:["The EL <> CL communication happens over the ",e.jsx(n.a,{href:"https://github.com/ethereum/execution-apis/blob/main/src/engine/common",children:"Engine API"}),", which is by default exposed at ",e.jsx(n.code,{children:"http://localhost:8551"}),". The connection is authenticated over JWT using a JWT secret which is auto-generated by Reth and placed in a file called ",e.jsx(n.code,{children:"jwt.hex"})," in the data directory, which on Linux by default is ",e.jsx(n.code,{children:"$HOME/.local/share/reth/"})," (",e.jsx(n.code,{children:"/Users/<NAME>/Library/Application Support/reth/mainnet/jwt.hex"})," in Mac)."]}),`
`,e.jsxs(n.p,{children:["You can override this path using the ",e.jsx(n.code,{children:"--authrpc.jwtsecret"})," option. You MUST use the same JWT secret in BOTH Reth and the chosen Consensus Layer. If you want to override the address or port, you can use the ",e.jsx(n.code,{children:"--authrpc.addr"})," and ",e.jsx(n.code,{children:"--authrpc.port"})," options, respectively."]}),`
`,e.jsx(n.p,{children:"So one might do:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(n.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(n.code,{children:[e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"reth"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" node"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    --authrpc.jwtsecret"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" /path/to/secret"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    --authrpc.addr"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 127.0.0.1"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    --authrpc.port"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 8551"})]})]})})}),`
`,e.jsx(n.p,{children:"At this point, our Reth node has started discovery, and even discovered some new peers. But it will not start syncing until you spin up the consensus layer!"}),`
`,e.jsxs(n.h2,{id:"running-the-consensus-layer",children:["Running the Consensus Layer",e.jsx(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#running-the-consensus-layer",children:e.jsx(n.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(n.p,{children:["First, make sure you have Lighthouse installed. Sigma Prime provides excellent ",e.jsx(n.a,{href:"https://lighthouse-book.sigmaprime.io/installation.html",children:"installation"})," and ",e.jsx(n.a,{href:"https://lighthouse-book.sigmaprime.io/run_a_node.html",children:"node operation"})," instructions."]}),`
`,e.jsx(n.p,{children:"Assuming you have done that, run:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(n.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(n.code,{children:[e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"lighthouse"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" bn"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    --checkpoint-sync-url"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" https://mainnet.checkpoint.sigp.io"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    --execution-endpoint"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" http://localhost:8551"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:" \\"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    --execution-jwt"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" /path/to/secret"})]})]})})}),`
`,e.jsx(n.p,{children:"If you don't intend on running validators on your node you can add:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(n.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(n.code,{children:e.jsx(n.span,{className:"line",children:e.jsx(n.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"  --disable-deposit-contract-sync"})})})})}),`
`,e.jsxs(n.p,{children:["The ",e.jsx(n.code,{children:"--checkpoint-sync-url"})," argument value can be replaced with any checkpoint sync endpoint from a ",e.jsx(n.a,{href:"https://eth-clients.github.io/checkpoint-sync-endpoints/#mainnet",children:"community maintained list"}),"."]}),`
`,e.jsx(n.p,{children:'Your Reth node should start receiving "fork choice updated" messages, and begin syncing the chain.'}),`
`,e.jsxs(n.h2,{id:"verify-the-chain-is-growing",children:["Verify the chain is growing",e.jsx(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#verify-the-chain-is-growing",children:e.jsx(n.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(n.p,{children:[`You can easily verify that by inspecting the logs, and seeing that headers are arriving in Reth. Sit back now and wait for the stages to run!
In the meantime, consider setting up `,e.jsx(n.a,{href:"/observability",children:"observability"})," to monitor your node's health or ",e.jsx(n.a,{href:"/home/runner/work/reth/reth/book/vocs/docs/pages/jsonrpc/intro",children:"test the JSON RPC API"}),"."]}),`
`,`
`,e.jsxs(n.h2,{id:"running-without-a-consensus-layer",children:["Running without a Consensus Layer",e.jsx(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#running-without-a-consensus-layer",children:e.jsx(n.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(n.p,{children:["We provide a method for running Reth without a Consensus Layer via the ",e.jsx(n.code,{children:"--debug.tip <HASH>"})," parameter. If you provide that to your node, it will simulate sending an ",e.jsx(n.code,{children:"engine_forkchoiceUpdated"})," message ",e.jsx(n.em,{children:"once"})," and will trigger syncing to the provided block hash. This is useful for testing and debugging purposes, but in order to have a node that can keep up with the tip you'll need to run a CL alongside it. At the moment we have no plans of including a Consensus Layer implementation in Reth, and we are open to including light clients other methods of syncing like importing Lighthouse as a library."]}),`
`,e.jsxs(n.h2,{id:"running-with-etherscan-as-block-source",children:["Running with Etherscan as Block Source",e.jsx(n.a,{"aria-hidden":"true",tabIndex:"-1",href:"#running-with-etherscan-as-block-source",children:e.jsx(n.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(n.p,{children:["You can use ",e.jsx(n.code,{children:"--debug.etherscan"})," to run Reth with a fake consensus client that advances the chain using recent blocks on Etherscan. This requires an Etherscan API key (set via ",e.jsx(n.code,{children:"ETHERSCAN_API_KEY"})," environment variable). Optionally, specify a custom API URL with ",e.jsx(n.code,{children:"--debug.etherscan <URL>"}),"."]}),`
`,e.jsx(n.p,{children:"Example:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(n.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(n.code,{children:[e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"export"}),e.jsx(n.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ETHERSCAN_API_KEY"}),e.jsx(n.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),e.jsx(n.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"your_api_key_here"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"reth"}),e.jsx(n.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" node"}),e.jsx(n.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --debug.etherscan"})]})]})})})]})}function h(s={}){const{wrapper:n}={...t(),...s.components};return n?e.jsx(n,{...s,children:e.jsx(i,{...s})}):i(s)}export{h as default,a as frontmatter};
