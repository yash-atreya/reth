import{f as r,j as e}from"./index-xNsX7Ar1.js";const o={description:"How to build, update, and troubleshoot Reth from source.",title:"Build from Source"};function n(i){const s={a:"a",aside:"aside",code:"code",div:"div",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...r(),...i.components};return e.jsxs(e.Fragment,{children:[e.jsx(s.header,{children:e.jsxs(s.h1,{id:"build-from-source",children:["Build from Source",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#build-from-source",children:e.jsx(s.div,{"data-autolink-icon":!0})})]})}),`
`,e.jsx(s.p,{children:"You can build Reth on Linux, macOS, Windows, and Windows WSL2."}),`
`,e.jsx(s.aside,{"data-callout":"note",children:e.jsxs(s.p,{children:["Reth does ",e.jsx(s.strong,{children:"not"})," work on Windows WSL1."]})}),`
`,e.jsxs(s.h2,{id:"dependencies",children:["Dependencies",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#dependencies",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["First, ",e.jsx(s.strong,{children:"install Rust"})," using ",e.jsx(s.a,{href:"https://rustup.rs/",children:"rustup"}),"ï¼š"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"curl"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --proto"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" '=https'"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --tlsv1.2"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" -sSf"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" https://sh.rustup.rs"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" |"}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" sh"})]})})})}),`
`,e.jsx(s.p,{children:"The rustup installer provides an easy way to update the Rust compiler, and works on all platforms."}),`
`,e.jsx(s.aside,{"data-callout":"tip",children:e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:["During installation, when prompted, enter ",e.jsx(s.code,{children:"1"})," for the default installation."]}),`
`,e.jsxs(s.li,{children:["After Rust installation completes, try running ",e.jsx(s.code,{children:"cargo version"}),` . If it cannot
be found, run `,e.jsx(s.code,{children:"source $HOME/.cargo/env"}),". After that, running ",e.jsx(s.code,{children:"cargo version"})," should return the version, for example ",e.jsx(s.code,{children:"cargo 1.68.2"}),"."]}),`
`,e.jsxs(s.li,{children:["It's generally advisable to append ",e.jsx(s.code,{children:"source $HOME/.cargo/env"})," to ",e.jsx(s.code,{children:"~/.bashrc"}),"."]}),`
`]})}),`
`,e.jsx(s.p,{children:`With Rust installed, follow the instructions below to install dependencies relevant to your
operating system:`}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Ubuntu"}),": ",e.jsx(s.code,{children:"apt-get install libclang-dev pkg-config build-essential"})]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"macOS"}),": ",e.jsx(s.code,{children:"brew install llvm pkg-config"})]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.strong,{children:"Windows"}),": ",e.jsx(s.code,{children:"choco install llvm"})," or ",e.jsx(s.code,{children:"winget install LLVM.LLVM"})]}),`
`]}),`
`,e.jsx(s.p,{children:"These are needed to build bindings for Reth's database."}),`
`,e.jsxs(s.p,{children:[`The Minimum Supported Rust Version (MSRV) of this project is 1.80.0. If you already have a version of Rust installed,
you can check your version by running `,e.jsx(s.code,{children:"rustc --version"}),". To update your version of Rust, run ",e.jsx(s.code,{children:"rustup update"}),"."]}),`
`,e.jsxs(s.h2,{id:"build-reth",children:["Build Reth",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#build-reth",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"With Rust and the dependencies installed, you're ready to build Reth. First, clone the repository:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"git"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" clone"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" https://github.com/paradigmxyz/reth"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"cd"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" reth"})]})]})})}),`
`,e.jsxs(s.p,{children:["Then, install Reth into your ",e.jsx(s.code,{children:"PATH"})," directly via:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"cargo"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" install"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --locked"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --path"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" bin/reth"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --bin"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" reth"})]})})})}),`
`,e.jsxs(s.p,{children:["The binary will now be accessible as ",e.jsx(s.code,{children:"reth"})," via the command line, and exist under your default ",e.jsx(s.code,{children:".cargo/bin"})," folder."]}),`
`,e.jsx(s.p,{children:"Alternatively, you can build yourself with:"}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"cargo"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --release"})]})})})}),`
`,e.jsxs(s.p,{children:["This will place the reth binary under ",e.jsx(s.code,{children:"./target/release/reth"}),", and you can copy it to your directory of preference after that."]}),`
`,e.jsxs(s.p,{children:["Compilation may take around 10 minutes. Installation was successful if ",e.jsx(s.code,{children:"reth --help"})," displays the ",e.jsx(s.a,{href:"#TODO",children:"command-line documentation"}),"."]}),`
`,e.jsxs(s.p,{children:["If you run into any issues, please check the ",e.jsx(s.a,{href:"#troubleshooting",children:"Troubleshooting"})," section, or reach out to us on ",e.jsx(s.a,{href:"https://t.me/paradigm_reth",children:"Telegram"}),"."]}),`
`,e.jsxs(s.h2,{id:"update-reth",children:["Update Reth",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#update-reth",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"You can update Reth to a specific version by running the commands below."}),`
`,e.jsxs(s.p,{children:["The ",e.jsx(s.code,{children:"reth"})," directory will be the location you cloned reth to during the installation process."]}),`
`,e.jsxs(s.p,{children:[e.jsx(s.code,{children:"${VERSION}"})," will be the version you wish to build in the format ",e.jsx(s.code,{children:"vX.X.X"}),"."]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(s.code,{children:[e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"cd"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" reth"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"git"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" fetch"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"git"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" checkout"}),e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ${VERSION}"})]}),`
`,e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"cargo"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --release"})]})]})})}),`
`,e.jsxs(s.h2,{id:"optimizations",children:["Optimizations",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#optimizations",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.strong,{children:"Profiles"}),`
`,e.jsxs(s.p,{children:[`You can customise the compiler settings used to compile Reth via
`,e.jsx(s.a,{href:"https://doc.rust-lang.org/cargo/reference/profiles.html",children:"Cargo profiles"}),"."]}),`
`,e.jsxs(s.p,{children:["Reth includes several profiles which can be selected via the Cargo flag ",e.jsx(s.code,{children:"--profile"}),"."]}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.code,{children:"release"}),`: default for source builds, enables most optimisations while not taking too long to
compile.`]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.code,{children:"maxperf"}),`: default for binary releases, enables aggressive optimisations including full LTO.
Although compiling with this profile improves some benchmarks by around 20% compared to `,e.jsx(s.code,{children:"release"}),`,
it imposes a `,e.jsx(s.em,{children:"significant"})," cost at compile time and is only recommended if you have a fast CPU."]}),`
`]}),`
`,e.jsx(s.strong,{children:"Rust compiler flags"}),`
`,e.jsxs(s.p,{children:["You can also use ",e.jsx(s.code,{children:'RUSTFLAGS="-C target-cpu=native"'}),` to enable CPU-specific optimisations. In order to get
the highest performance out of your build:`]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"RUSTFLAGS"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"-C target-cpu=native"'}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" cargo"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --profile"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" maxperf"})]})})})}),`
`,e.jsx(s.strong,{children:"Features"}),`
`,e.jsx(s.p,{children:`Finally, some optional features are present that may improve performance, but may not very portable,
and as such might not compile on your particular system. These are currently:`}),`
`,e.jsxs(s.ul,{children:[`
`,e.jsxs(s.li,{children:[e.jsx(s.code,{children:"jemalloc"}),": replaces the default system memory allocator with ",e.jsx(s.a,{href:"https://jemalloc.net/",children:e.jsx(s.code,{children:"jemalloc"})}),"; this feature is unstable on Windows"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.code,{children:"asm-keccak"}),": replaces the default, pure-Rust implementation of Keccak256 with one implemented in assembly; see ",e.jsxs(s.a,{href:"https://github.com/DaniPopes/keccak-asm",children:["the ",e.jsx(s.code,{children:"keccak-asm"})," crate"]})," for more details and supported targets"]}),`
`,e.jsxs(s.li,{children:[e.jsx(s.code,{children:"min-LEVEL-logs"}),", where ",e.jsx(s.code,{children:"LEVEL"})," is one of ",e.jsx(s.code,{children:"error"}),", ",e.jsx(s.code,{children:"warn"}),", ",e.jsx(s.code,{children:"info"}),", ",e.jsx(s.code,{children:"debug"}),", ",e.jsx(s.code,{children:"trace"}),": disables compilation of logs of lower level than the given one; this in general isn't that significant, and is not recommended due to the loss of debugging that the logs would provide"]}),`
`]}),`
`,e.jsxs(s.p,{children:["You can activate features by passing them to the ",e.jsx(s.code,{children:"--features"})," or ",e.jsx(s.code,{children:"-F"}),` Cargo flag;
multiple features can be activated with a space- or comma-separated list to the flag:`]}),`
`,e.jsx(e.Fragment,{children:e.jsx(s.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsx(s.code,{children:e.jsxs(s.span,{className:"line",children:[e.jsx(s.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"RUSTFLAGS"}),e.jsx(s.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"-C target-cpu=native"'}),e.jsx(s.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" cargo"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" build"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --profile"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" maxperf"}),e.jsx(s.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" --features"}),e.jsx(s.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" jemalloc,asm-keccak"})]})})})}),`
`,e.jsxs(s.h2,{id:"troubleshooting",children:["Troubleshooting",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#troubleshooting",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.h3,{id:"command-is-not-found",children:["Command is not found",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#command-is-not-found",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["Reth will be installed to ",e.jsx(s.code,{children:"CARGO_HOME"})," or ",e.jsx(s.code,{children:"$HOME/.cargo"}),". This directory needs to be on your ",e.jsx(s.code,{children:"PATH"})," before you can run ",e.jsx(s.code,{children:"$ reth"}),"."]}),`
`,e.jsxs(s.p,{children:["See ",e.jsxs(s.a,{href:"https://www.rust-lang.org/tools/install",children:['"Configuring the ',e.jsx(s.code,{children:"PATH"}),' environment variable"']})," for more information."]}),`
`,e.jsxs(s.h3,{id:"compilation-error",children:["Compilation error",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#compilation-error",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsxs(s.p,{children:["Make sure you are running the latest version of Rust. If you have installed Rust using rustup, simply run ",e.jsx(s.code,{children:"rustup update"}),"."]}),`
`,e.jsxs(s.p,{children:[`If you can't install the latest version of Rust you can instead compile using the Minimum Supported
Rust Version (MSRV) which is listed under the `,e.jsx(s.code,{children:"rust-version"}),` key in Reth's
`,e.jsx(s.a,{href:"https://github.com/paradigmxyz/reth/blob/main/Cargo.toml",children:"Cargo.toml"}),"."]}),`
`,e.jsxs(s.p,{children:["If compilation fails with ",e.jsx(s.code,{children:"(signal: 9, SIGKILL: kill)"}),`, this could mean your machine ran out of
memory during compilation. If you are on Docker, consider increasing the memory of the container, or use a `,e.jsx(s.a,{href:"/installation/binaries",children:`pre-built
binary`}),"."]}),`
`,e.jsxs(s.p,{children:["If compilation fails in either the ",e.jsx(s.code,{children:"keccak-asm"})," or ",e.jsx(s.code,{children:"sha3-asm"}),` crates, it is likely that your current
system configuration is not supported. See the `,e.jsxs(s.a,{href:"https://github.com/DaniPopes/keccak-asm?tab=readme-ov-file#support",children:[e.jsx(s.code,{children:"keccak-asm"})," target table"]})," for supported targets."]}),`
`,e.jsxs(s.p,{children:["If compilation fails with ",e.jsx(s.code,{children:"error: linking with cc failed: exit code: 1"}),", try running ",e.jsx(s.code,{children:"cargo clean"}),"."]}),`
`,e.jsx(s.p,{children:e.jsxs(s.em,{children:["(Thanks to Sigma Prime for this section from ",e.jsx(s.a,{href:"https://lighthouse-book.sigmaprime.io/installation.html",children:"their Lighthouse book"}),"!)"]})}),`
`,e.jsxs(s.h3,{id:"bus-error-wsl2",children:["Bus error (WSL2)",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#bus-error-wsl2",children:e.jsx(s.div,{"data-autolink-icon":!0})})]}),`
`,e.jsx(s.p,{children:"In WSL 2 on Windows, the default virtual disk size is set to 1TB."}),`
`,e.jsx(s.p,{children:"You must increase the allocated disk size for your WSL2 instance before syncing reth."}),`
`,e.jsxs(s.p,{children:["You can follow the instructions here: ",e.jsx(s.a,{href:"https://learn.microsoft.com/en-us/windows/wsl/disk-space#how-to-expand-the-size-of-your-wsl-2-virtual-hard-disk",children:"how to expand the size of your WSL2 virtual hard disk."})]})]})}function a(i={}){const{wrapper:s}={...r(),...i.components};return s?e.jsx(s,{...i,children:e.jsx(n,{...i})}):n(i)}export{a as default,o as frontmatter};
